<view class="container">
  <!-- 顶部图片 -->
  <view class="knot-header">
    <image class="knot-cover" src="{{knot.coverImage}}" mode="aspectFill"></image>
    <view class="knot-overlay">
      <view class="knot-title">{{knot.name}}</view>
      <view class="knot-meta">
        <text class="knot-category">{{knot.category.name}}</text>
        <text class="knot-views">{{knot.viewCount}}次浏览</text>
      </view>
    </view>
  </view>

  <!-- 绳结信息 -->
  <!-- <view class="knot-info">
    <view class="info-item">
      <text class="info-label">难度等级</text>
      <view class="difficulty-stars">
        <text class="star" wx:for="{{knot.difficultyLevel}}" wx:key="*this">★</text>
      </view>
    </view>
    
    <view class="info-item">
      <text class="info-label">创建时间</text>
      <text class="info-value">{{knot.createdAt}}</text>
    </view>
  </view> -->

  <!-- 绳结描述 -->
  <view class="knot-description">
    <view class="section-title">绳结介绍</view>
    <text class="description-text">{{knot.description}}</text>
  </view>

  <!-- 打结步骤 -->
  <view class="knot-steps">
    <view class="section-title">打结步骤</view>
    
    <!-- 步骤图片轮播图 -->
    <view class="steps-carousel" wx:if="{{knot.images.length > 0}}">
      <swiper class="carousel-swiper" 
              indicator-dots="{{true}}" 
              autoplay="{{autoplay}}" 
              interval="{{autoplayInterval}}" 
              duration="{{500}}"
              circular="{{true}}"
              indicator-color="rgba(255, 255, 255, 0.3)"
              indicator-active-color="#ffffff">
        <swiper-item wx:for="{{knot.images}}" wx:key="id">
          <image class="carousel-image" 
                 src="{{item.imageUrl}}" 
                 mode="aspectFit"
                 bindtap="previewImage"
                 data-urls="{{imageUrls}}"
                 data-current="{{item.imageUrl}}"></image>
          <view class="image-info" wx:if="{{item.imageRemark}}">
            <text class="image-remark">{{item.imageRemark}}</text>
          </view>
        </swiper-item>
      </swiper>
      
      <!-- 轮播图控制 -->
      <view class="carousel-controls">
        <view class="control-item">
          <text class="control-label">自动播放</text>
          <switch class="autoplay-switch" 
                  checked="{{autoplay}}" 
                  bindchange="toggleAutoplay"></switch>
        </view>
        <view class="control-item" wx:if="{{autoplay}}">
          <text class="control-label">播放速度</text>
          <slider class="speed-slider" 
                  min="3000" 
                  max="9000" 
                  step="500" 
                  value="{{autoplayInterval}}" 
                  bindchange="changeSpeed"
                  activeColor="#667eea"
                  backgroundColor="#e0e0e0"></slider>
          <text class="speed-text">{{autoplayInterval/1000}}秒</text>
        </view>
      </view>
    </view>
    
    <!-- 步骤文字描述 -->
    <view class="steps-text" wx:if="{{knot.steps}}">
      <view class="text-title">步骤说明</view>
      <text class="steps-content">{{knot.steps}}</text>
    </view>
  </view>

  <!-- 相关图片 -->
  <!-- <view class="knot-images" wx:if="{{knot.images.length > 0}}">
    <view class="section-title">相关图片</view>
    <view class="images-grid">
      <image class="grid-image" 
             wx:for="{{knot.images}}" 
             wx:key="id" 
             src="{{item.imageUrl}}" 
             mode="aspectFill"
             bindtap="previewImage"
             data-urls="{{imageUrls}}"
             data-current="{{item.imageUrl}}"></image>
    </view>
  </view> -->

  <!-- 相关推荐 -->
  <view class="related-knots" wx:if="{{relatedKnots.length > 0}}">
    <view class="section-title">相关推荐</view>
    <view class="related-list">
      <view class="related-item" 
            wx:for="{{relatedKnots}}" 
            wx:key="id" 
            bindtap="goToDetail" 
            data-id="{{item.id}}">
        <image class="related-image" src="{{item.coverImage}}" mode="aspectFill"></image>
        <view class="related-info">
          <text class="related-name">{{item.name}}</text>
          <text class="related-category">{{item.category.name}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 底部操作栏 -->
  <view class="bottom-actions">
    <button class="action-btn share-btn" bindtap="shareKnot">
      <icon type="share" size="20"></icon>
      <text>分享</text>
    </button>
    <button class="action-btn favorite-btn" bindtap="toggleFavorite">
      <icon type="{{isFavorite ? 'success' : 'circle'}}" size="20"></icon>
      <text>{{isFavorite ? '已收藏' : '收藏'}}</text>
    </button>
  </view>
</view>

